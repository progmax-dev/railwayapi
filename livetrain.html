<!DOCTYPE html>
<html>
    <head>
      <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */

        #map {
          height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
      </style>
      <title>Live Trains</title>
    </head>
    <body>

      <div id="Overview">
          Enter Train no:<br>
          <input type="text" id="train_no"/><br>
          Train Start Date:<br>
          <input id="date"type="text" name="" value="">
          <button id="Track Train" onclick="initMap()">Check live status</button>
      </div>
      <div id="map"></div>

        <div id="Details">

        </div>

    </body>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript">
    let key='qe55lkiy58';
    var plot=function(tno, date)
    {

      var xhttp= new XMLHttpRequest();

      xhttp.open(
      "GET",`https://api.railwayapi.com/v2/live/train/${tno}/date/${date}/apikey/${key}/`, true  );


        xhttp.onreadystatechange= function(){
          if(this.readyState==4 && this.status==200)
          {
            traindata= JSON.parse(xhttp.responseText);

            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: traindata.current_station.lat, lng: traindata.current_station.lng},
              zoom: 10

            });
            function clearMarkers() {
              setMapOnAll(null);
            }

            var marker = new google.maps.Marker({position: {lat: traindata.current_station.lat, lng: traindata.current_station.lng}, map:map});

          }
        }

        xhttp.send();
    }


        var map;
        function initMap() {
          var traindata,lat,long;
          var xhttp=new XMLHttpRequest();
          let tno=document.getElementById("train_no").value;
          let date=document.getElementById("date").value;

          plot(tno,date);
          setInterval(plot,60000);
        }


    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBD08sMoYQOENEWwpgaMYsWz_ZDvQ5Oo0k" async defer></script>

</html>
